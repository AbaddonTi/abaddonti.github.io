<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Общий анализ проекта</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.1.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/luxon/2.3.1/luxon.min.js"></script>
    <script defer src="js/script.js"></script>
</head>
<body>
    <div class="container">
        <h1>Общий анализ проекта</h1>
        <div class="filters">
            <div class="filter-group">
                <label for="start-date">Начальная дата и время:</label>
                <input type="datetime-local" id="start-date" onchange="filterData()">
            </div>
            <div class="filter-group">
                <label for="end-date">Конечная дата и время:</label>
                <input type="datetime-local" id="end-date" onchange="filterData()">
            </div>
            <div class="filter-group">
                <label for="team">Выбор команды:</label>
                <select id="team" onchange="updateEmployeeDropdown(); filterData();">
                    <option value="Все">Все</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="employee">Выбор сотрудника:</label>
                <select id="employee" onchange="filterData()">
                    <option value="Любой">Любой</option>
                </select>
            </div>
        </div>
        <div class="results">
            <div class="summary">
                <h2>Общая сводка по бизнесу:</h2>
                <div id="profit-display">Общий профит: </div>
                <div id="spread-display">Средний спред: </div>
                <div id="volume-display">Общий объем: </div>
                <div id="net-income-display">Чистая прибыль: </div>
                <div id="total-expense-display">Общая сумма трат: </div>
            </div>
            <canvas id="profitChart" width="400" height="200"></canvas>
            <div class="expenses">
                <h2>Расходы (детально):</h2>
                <div id="expense-buttons">
                    <!-- Кнопки расходов будут добавлены здесь -->
                </div>
                <button id="toggle-all" onclick="toggleAllButtons()">Выделить все / Снять выделение</button>
            </div>
        </div>
        <div id="data-display">Ожидание данных...</div>
    </div>
</body>
</html>
